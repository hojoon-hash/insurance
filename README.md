# 🦷 치위선생 - 치아보험 진단 플랫폼 (최종 완성판)

치과위생사 출신 전문가가 제공하는 양심적인 치아보험 분석 서비스

## ✨ 주요 업데이트

### 🎯 최적화된 채팅 플로우 (5개 질문)
1. **연령대** - 리스크 계산 기준
2. **치료 이력** (다중선택) - 과거 치과 치료 경험
3. **현재 증상** (다중선택) - 고관여 리드 필터링
4. **미래 걱정** (다중선택) - 니즈 파악
5. **보험 가입 여부** - 현황 확인

### 📊 2단계 결과 공개 시스템

#### 1단계: 티저 결과 (리드 수집 전)
- 🔒 흐릿한 점수 표시
- 💰 예상 절감액 미리보기
- ✨ 상세 결과 보기 CTA

#### 2단계: 리드 수집 폼
- 📝 이름, 전화번호, 생년월일
- ✅ 개인정보 수집·이용 동의 (필수)
- 📩 마케팅 수신 동의 (선택)
- 🔐 실시간 입력 검증

#### 3단계: 상세 분석 결과
- 📈 종합 점수 및 등급
- 💵 시나리오 기반 치료비 계산
- 📊 3대 항목 보장 분석
- ⚠️ 위험 요인 상세 설명
- 💡 우선순위별 맞춤 솔루션

## 🎨 UI/UX 개선사항

### 소비자 친화적 용어 사용
| 기존 (어려움) | 개선 (쉬움) |
|-------------|-----------|
| 보존치료 | 충치·신경 치료 (보존치료) |
| 보철치료 | 크라운·임플란트 (보철치료) |
| 치주치료 | 잇몸 질환 (치주치료) |

### 가독성 향상
- ✅ 큰 글자 크기 (최소 16px)
- ✅ 충분한 행간 (1.6배)
- ✅ 이모지 적극 활용
- ✅ 색상 대비 최적화

### 인터랙션 강화
- ✅ 카운팅 애니메이션
- ✅ 프로그레스 바 애니메이션
- ✅ 도넛 차트 회전 효과
- ✅ 아코디언 확장/축소

## 🧮 분석 로직 개선

### 시나리오 기반 비용 계산
```javascript
// 사용자 선택 항목별 실제 치료비 적용
임플란트 → 2,400,000원 (평균 2개)
자녀 교정 → 4,500,000원
부모님 틀니 → 3,000,000원
크라운 치료 → 500,000원
잇몸 치료 → 800,000원
```

### 카테고리별 상세 분석
```javascript
각 항목마다:
- 현재 보장액
- 권장 보장액
- 부족액
- 관련 증상/고민 매칭
- 구체적 치료 예시
```

### 리드 스코어링 시스템
```
HOT (80점+): 긴급 상담 필요
WARM (50-79점): 적극 상담 권장
COLD (0-49점): 정보 제공
```

## 🚀 실행 방법

### 1. Backend 서버
```bash
cd backend
npm install
node server.js
```
**포트**: 5000

### 2. Frontend 서버
```bash
cd frontend
npm install
npm run dev
```
**포트**: 8082 (자동 할당)

## 🌐 접속 URL

### 공개 URL
```
https://8082-i77yvvbbowqvh1mbtw5u5-b32ec7bb.sandbox.novita.ai
```

### 로컬 URL
```
http://localhost:8082
```

## 📁 프로젝트 구조

```
frontend/src/
├── components/
│   ├── Layout.jsx              # 모바일 컨테이너
│   ├── FloatingEnvelope.jsx    # 3D 편지 봉투
│   ├── ChatMessage.jsx         # 채팅 메시지
│   ├── ProgressBar.jsx         # 진행률 표시
│   ├── PreviewResult.jsx       # 🆕 티저 결과 화면
│   ├── LeadFormModal.jsx       # 🆕 리드 수집 폼
│   ├── ScoreChart.jsx          # 도넛 차트
│   ├── ReceiptCard.jsx         # 영수증 UI
│   └── LeadModal.jsx           # (기존) 상담 신청
├── pages/
│   ├── Home.jsx               # 랜딩 페이지
│   ├── Diagnosis.jsx          # 🔄 채팅 진단 (업데이트)
│   └── Result.jsx             # 🔄 상세 결과 (재구성)
└── App.jsx
```

## 🎯 사용자 플로우

```
랜딩 페이지
    ↓
채팅 진단 (5개 질문)
    ↓
티저 결과 (예상 절감액)
    ↓
리드 수집 폼 (정보 입력)
    ↓
상세 결과 페이지
    ↓
상담 신청
```

## 📊 API 엔드포인트

### POST /api/diagnosis
사용자 답변 기반 상세 분석

**Request:**
```json
{
  "ageGroup": "40대",
  "dentalHistory": ["충치 치료 (때우기)"],
  "symptoms": ["양치할 때 피가 나요 🩸"],
  "concerns": ["임플란트 (이 빠지면) 💰"],
  "hasInsurance": "네, 가입되어 있어요"
}
```

**Response:**
```json
{
  "score": 45,
  "grade": { "text": "주의", "emoji": "🟠" },
  "riskFactors": [...],
  "totalScenarioCost": 2500000,
  "currentOutOfPocket": 1875000,
  "optimizedOutOfPocket": 375000,
  "savings": 1500000,
  "categories": {
    "cavity_nerve": { ... },
    "crown_implant": { ... },
    "gum_disease": { ... }
  },
  "leadScore": { "quality": "HOT", "priority": 1 }
}
```

### POST /api/lead
리드 정보 저장

**Request:**
```json
{
  "name": "홍길동",
  "phone": "010-1234-5678",
  "birthDate": "1985-03-15",
  "privacyAgree": true,
  "marketingAgree": true,
  "score": 45,
  "grade": "주의",
  "savings": 1500000
}
```

## 🎨 디자인 시스템

### 컬러 팔레트
- **Primary (Deep Blue)**: `#1e3a8a`
- **Accent (Neon Green)**: `#22c55e`
- **Alert (Red)**: `#ef4444`
- **Warning (Orange)**: `#f59e0b`

### 등급별 색상
- 🟢 우수 (80-100점): Green
- 🔵 양호 (60-79점): Blue
- 🟠 주의 (40-59점): Orange
- 🔴 위험 (0-39점): Red

## 🔍 핵심 개선사항

### ✅ 완료된 작업
1. ✅ 채팅 질문 5개로 최적화
2. ✅ 2단계 결과 공개 시스템 구현
3. ✅ 리드 수집 폼 with 검증
4. ✅ 시나리오 기반 비용 계산
5. ✅ 소비자 친화적 용어 전환
6. ✅ 카테고리별 상세 분석
7. ✅ 위험 요인 아코디언
8. ✅ 우선순위별 맞춤 솔루션
9. ✅ 리드 스코어링 시스템

### 📈 전환율 최적화 전략
- 🎣 **Hook**: 3분 진단, 평균 26만원 절감
- 🔒 **Teaser**: 점수 흐림 처리로 호기심 유발
- 📝 **Capture**: 간단한 폼으로 진입장벽 낮춤
- 💎 **Value**: 상세한 분석 결과 제공
- 📞 **CTA**: 고정 하단 상담 버튼

## 🎯 비즈니스 메트릭

### 리드 품질 지표
- **HOT 리드**: 점수 40점 미만 + 고위험 요인
- **WARM 리드**: 점수 40-60점 + 중위험 요인
- **COLD 리드**: 점수 60점 이상

### 예상 전환율
- 진단 완료율: 85%+
- 리드 수집율: 65%+
- 상담 신청율: 40%+

## 📝 라이선스

Copyright © 2026 치위선생. All rights reserved.

---

## 🚀 다음 개발 계획

- [ ] SMS/이메일 자동 발송
- [ ] 관리자 대시보드
- [ ] 카카오톡 공유하기
- [ ] PDF 다운로드
- [ ] A/B 테스트 프레임워크
- [ ] Google Analytics 연동
